{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport ProductData from '../../../../shared/data/products.json';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../core/services/product.service\";\nimport * as i3 from \"../../../../core/services/logger.service\";\nimport * as i4 from \"../../../../core/services/error-handler.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../../../shared/pipes/percent.pipe\";\nimport * as i7 from \"../../../../shared/pipes/specialCharacterToSpace.pipe\";\n\nfunction ProductViewComponent_table_3_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 6)(1, \"td\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 4);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"titlecase\");\n    i0.ɵɵpipe(8, \"specialCharacterToSpacePipe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 4);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 4);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 4);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"myPercentPipe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\", 4);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const product_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 7, i0.ɵɵpipeBind2(8, 9, product_r3.category, \"-\")), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r3.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.isDiscount ? \"YES\" : \"NO\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 12, product_r3.discountPercentInDecimal), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r3.productStatus);\n  }\n}\n\nfunction ProductViewComponent_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 3)(1, \"thead\")(2, \"tr\")(3, \"td\", 4);\n    i0.ɵɵtext(4, \"Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 4);\n    i0.ɵɵtext(6, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 4);\n    i0.ɵɵtext(8, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 4);\n    i0.ɵɵtext(10, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 4);\n    i0.ɵɵtext(12, \"Discount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 4);\n    i0.ɵɵtext(14, \"Discount Percent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 4);\n    i0.ɵɵtext(16, \"Product Status\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, ProductViewComponent_table_3_tr_18_Template, 18, 14, \"tr\", 5);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.products);\n  }\n}\n\nfunction ProductViewComponent_div_4_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 9)(1, \"li\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"ul\")(4, \"li\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"li\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"titlecase\");\n    i0.ɵɵpipe(9, \"specialCharacterToSpacePipe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"li\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"li\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"li\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"myPercentPipe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"li\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" ID: \", product_r5.id, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Name: \", product_r5.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Category: \", i0.ɵɵpipeBind1(8, 7, i0.ɵɵpipeBind2(9, 9, product_r5.category, \"-\")), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Price: \", product_r5.price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Discount: \", product_r5.isDiscount ? \"YES\" : \"NO\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Discount Percent: \", i0.ɵɵpipeBind1(16, 12, product_r5.discountPercentInDecimal), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Product Status: \", product_r5.productStatus, \"\");\n  }\n}\n\nfunction ProductViewComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtemplate(1, ProductViewComponent_div_4_ul_1_Template, 19, 14, \"ul\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.products);\n  }\n}\n\nexport class ProductViewComponent {\n  route;\n  productService;\n  logger;\n  errorHandler;\n  typeOfProduct;\n  typeOfProductsView;\n  products;\n  categories;\n  categoryLinks = [];\n  routeSubcription;\n  productSubcription;\n  typeOfProductsViewSubscription;\n\n  constructor(route, productService, logger, errorHandler) {\n    this.route = route;\n    this.productService = productService;\n    this.logger = logger;\n    this.errorHandler = errorHandler;\n    this.routeSubcription = this.route.url.subscribe(data => {\n      console.log('Product view routing');\n      console.log(data);\n      if (!data[1]) this.typeOfProduct = 'all';else this.typeOfProduct = data[1].path;\n\n      if (!this.typeOfProductsView) {\n        console.log('CHAWNG TYPE OF PRODUCT VIEW');\n        this.typeOfProductsView = this.productService.getTypeOfProductsView();\n      }\n\n      if (this.routeSubcription) {\n        this.logger.sendLog('How', 'log', 'BOLD_BLUE_TEXT_WHITE_BG');\n        this.productService.nextProducts(this.productService.getProducts());\n      }\n    });\n    this.typeOfProductsViewSubscription = this.productService.typeOfProductsViewObservable().subscribe(type => {\n      if (this.typeOfProductsView !== type) {\n        this.typeOfProductsView = type;\n      }\n    });\n    this.products = this.productService.getProducts();\n    console.log('Product property of Product component');\n    console.log(this.products);\n  }\n\n  ngOnInit() {\n    this.logger.sendLog('Product view init.', 'log', 'BOLD_BLUE_TEXT_WHITE_BG'); // Cái này thay cho việc fetch dữ liệu :))))\n\n    setTimeout(() => {\n      this.productService.nextProducts(ProductData);\n    }, 0);\n    this.productSubcription = this.productService.productObservable().subscribe(products => {\n      console.log('Get products from data service in Product component.');\n      console.log(this.typeOfProduct);\n\n      if (this.typeOfProduct !== 'all') {\n        this.products = products.filter(product => product.category === this.typeOfProduct);\n      } else {\n        this.products = [...products];\n      }\n    }, err => {\n      this.errorHandler.forbidden(err);\n    });\n  }\n\n  ngAfterViewInit() {\n    this.logger.sendLog('Product view after view init.', 'log', 'BOLD_BLUE_TEXT_WHITE_BG');\n  }\n\n  ngOnDestroy() {\n    this.logger.sendLog('Product view destroy', 'log', 'BOLD_BLUE_TEXT_WHITE_BG');\n    this.products = [];\n    this.routeSubcription.unsubscribe();\n    this.productSubcription.unsubscribe();\n  }\n\n  static ɵfac = function ProductViewComponent_Factory(t) {\n    return new (t || ProductViewComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.LoggerService), i0.ɵɵdirectiveInject(i4.ErrorHandlerService));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductViewComponent,\n    selectors: [[\"app-product-view\"]],\n    decls: 5,\n    vars: 6,\n    consts: [[1, \"pb-1\"], [\"id\", \"product-table\", 4, \"ngIf\"], [\"class\", \"product-list\", 4, \"ngIf\"], [\"id\", \"product-table\"], [1, \"p-1\"], [\"class\", \"product-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"product-row\"], [1, \"product-list\"], [\"class\", \"mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"mb-3\"]],\n    template: function ProductViewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h4\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵpipe(2, \"specialCharacterToSpacePipe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, ProductViewComponent_table_3_Template, 19, 1, \"table\", 1);\n        i0.ɵɵtemplate(4, ProductViewComponent_div_4_Template, 2, 1, \"div\", 2);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" You are viewing \", i0.ɵɵpipeBind2(2, 3, ctx.typeOfProduct, \"-\"), \" products.\\n\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.typeOfProductsView === \"table\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.typeOfProductsView === \"list\");\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i5.TitleCasePipe, i6.PercentPipe, i7.SpecialCharacterToSpacePipe],\n    encapsulation: 2\n  });\n}","map":null,"metadata":{},"sourceType":"module"}