{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport ProductCategories from '../../../../shared/data/product-categories.json';\nimport getUniqueItemsFromArray from '../../../../shared/utils/getUniqueItemsFromArray';\nimport replaceSpecialCharToSpace from '../../../../shared/utils/replaceSpecialCharToSpace';\nimport toTitleCase from '../../../../shared/utils/toTitleCase';\nimport getPathSegments from '../../../../shared/utils/getPathSegments';\nimport product_routing_patterns from '../../product-routing.pattern';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../core/services/logger.service\";\nimport * as i3 from \"../../../../core/services/product.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../../shared/components/navbar/navbar.component\";\nimport * as i6 from \"../../../../shared/pipes/specialCharacterToSpace.pipe\";\n\nfunction ProductComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"specialCharacterToSpacePipe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"app-navbar\", 1);\n    i0.ɵɵelementStart(5, \"div\", 3);\n    i0.ɵɵelement(6, \"router-outlet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" You are viewing as \", i0.ɵɵpipeBind2(3, 2, ctx_r0.typeOfProductsView, \"-\"), \". \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"appRouterLinks\", ctx_r0.categoryLinks);\n  }\n}\n\nexport class ProductComponent {\n  route;\n  logger;\n  productService;\n  router;\n  typeOfProduct;\n  typeOfProductsView = '';\n  categories;\n  categoryLinks = [];\n  listViewLinks = [{\n    name: 'List',\n    link: 'list'\n  }, {\n    name: 'Table',\n    link: 'table'\n  }];\n  routerSubcription;\n  typeOfViewSubcription;\n\n  constructor(route, logger, productService, router) {\n    this.route = route;\n    this.logger = logger;\n    this.productService = productService;\n    this.router = router;\n    this.routerSubcription = this.router.events.subscribe(events => {\n      if (events instanceof NavigationEnd) {\n        const segments = getPathSegments(product_routing_patterns['toCategoryOfProduct'], events.url);\n        console.log('Segments view: ', segments.view);\n        console.log('Type of view: ', this.typeOfProductsView);\n\n        if (segments.view !== undefined) {\n          if (this.typeOfProductsView !== segments.view) {\n            console.log(this.typeOfProductsView !== segments.view);\n            this.typeOfProductsView = segments.view;\n            this.productService.nextTypeOfProductsView(this.typeOfProductsView);\n            this.categories = getUniqueItemsFromArray(ProductCategories.map(category => category));\n            this.categoryLinks = this.categories.map(category => ({\n              name: toTitleCase(replaceSpecialCharToSpace(category, '-')),\n              link: this.typeOfProductsView + '/' + category\n            }));\n            this.categoryLinks.unshift({\n              name: 'All',\n              link: this.typeOfProductsView\n            });\n          }\n        } else {\n          this.typeOfProductsView = '';\n        }\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.logger.sendLog('Product init.', 'log', 'BOLD_BLUE_TEXT_WHITE_BG');\n    setTimeout(() => {\n      console.log(this.categories);\n    }, 0);\n  }\n\n  ngOnDestroy() {\n    this.logger.sendLog('Product destroy', 'log', 'BOLD_BLUE_TEXT_WHITE_BG');\n    this.routerSubcription.unsubscribe();\n  }\n\n  static ɵfac = function ProductComponent_Factory(t) {\n    return new (t || ProductComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.LoggerService), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i1.Router));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductComponent,\n    selectors: [[\"app-product\"]],\n    decls: 5,\n    vars: 2,\n    consts: [[1, \"product\", \"p-2\"], [3, \"appRouterLinks\"], [4, \"ngIf\"], [1, \"product-list\"]],\n    template: function ProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \"Product manager\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"app-navbar\", 1);\n        i0.ɵɵtemplate(4, ProductComponent_ng_container_4_Template, 7, 5, \"ng-container\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"appRouterLinks\", ctx.listViewLinks);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.typeOfProductsView !== \"\");\n      }\n    },\n    dependencies: [i4.NgIf, i5.NavbarComponent, i1.RouterOutlet, i6.SpecialCharacterToSpacePipe],\n    encapsulation: 2\n  });\n}","map":null,"metadata":{},"sourceType":"module"}