{"ast":null,"code":"import Products from \"../../data/products.json\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../pipes/percent.pipe\";\nimport * as i4 from \"../../pipes/specialCharacterToSpace.pipe\";\n\nfunction SearchComponent_ng_container_6_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \";\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SearchComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 5);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, SearchComponent_ng_container_6_p_3_Template, 2, 0, \"p\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const searchParamsKey_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", searchParamsKey_r2, \": \", ctx_r0.searchParams[searchParamsKey_r2], \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r3 < ctx_r0.searchParamsKeys.length - 1);\n  }\n}\n\nfunction SearchComponent_table_10_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 10)(1, \"td\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 8);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 8);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"titlecase\");\n    i0.ɵɵpipe(8, \"specialCharacterToSpacePipe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 8);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 8);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 8);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"myPercentPipe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\", 8);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const product_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r6.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r6.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 7, i0.ɵɵpipeBind2(8, 9, product_r6.category, \"-\")), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r6.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r6.isDiscount ? \"YES\" : \"NO\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 12, product_r6.discountPercentInDecimal), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r6.productStatus);\n  }\n}\n\nfunction SearchComponent_table_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 7)(1, \"thead\")(2, \"tr\")(3, \"td\", 8);\n    i0.ɵɵtext(4, \"Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 8);\n    i0.ɵɵtext(6, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 8);\n    i0.ɵɵtext(8, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 8);\n    i0.ɵɵtext(10, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 8);\n    i0.ɵɵtext(12, \"Discount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 8);\n    i0.ɵɵtext(14, \"Discount Percent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 8);\n    i0.ɵɵtext(16, \"Product Status\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, SearchComponent_table_10_tr_18_Template, 18, 14, \"tr\", 9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.filteredProducts);\n  }\n}\n\nexport class SearchComponent {\n  route;\n  searchParams = {};\n  searchParamsKeys = [];\n  products = []; // Test\n\n  filteredProducts = [];\n  routeSubscription;\n\n  constructor(route) {\n    this.route = route;\n    this.products = Products;\n    this.routeSubscription = this.route.queryParams.subscribe(params => {\n      this.searchParams = Object.assign({}, params);\n      this.searchParamsKeys = Object.keys(this.searchParams);\n      this.filteredProducts = this.filter(this.searchParamsKeys, this.searchParams);\n    });\n  }\n\n  filter(keys, searchParams) {\n    let copyOfProducts = [...this.products];\n\n    for (let key of keys) {\n      copyOfProducts = copyOfProducts.filter(product => {\n        return product[key].toLowerCase().includes(searchParams[key].toLowerCase());\n      });\n    }\n\n    console.log(copyOfProducts);\n    return copyOfProducts;\n  }\n\n  ngOnInit() {}\n\n  ngOnDestroy() {\n    this.routeSubscription.unsubscribe();\n  }\n\n  static ɵfac = function SearchComponent_Factory(t) {\n    return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SearchComponent,\n    selectors: [[\"app-search\"]],\n    decls: 11,\n    vars: 3,\n    consts: [[1, \"search\"], [1, \"search-keys\", \"mt-2\", \"mb-3\"], [4, \"ngFor\", \"ngForOf\"], [1, \"mb-1\"], [\"id\", \"product-table\", 4, \"ngIf\"], [1, \"search-key\"], [4, \"ngIf\"], [\"id\", \"product-table\"], [1, \"p-1\"], [\"class\", \"product-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"product-row\"]],\n    template: function SearchComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Hello, welcome to your search result page in E-Shopping!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"p\");\n        i0.ɵɵtext(5, \"You search:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, SearchComponent_ng_container_6_Template, 4, 3, \"ng-container\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 3)(8, \"p\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(10, SearchComponent_table_10_Template, 19, 1, \"table\", 4);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.searchParamsKeys);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Found \", ctx.filteredProducts.length, \" result(s).\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.filteredProducts.length > 0);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i2.TitleCasePipe, i3.PercentPipe, i4.SpecialCharacterToSpacePipe],\n    styles: [\"[_nghost-%COMP%]{display:block;width:100%;height:100vh}.search[_ngcontent-%COMP%]{width:100%;height:100vh;padding:12px 16px}.search-keys[_ngcontent-%COMP%]{display:flex;padding-bottom:6px;border-bottom:1px solid}.search-key[_ngcontent-%COMP%]{font-weight:600;margin-left:12px}\"]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}